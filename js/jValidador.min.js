(function(f){function k(a,b){f(this);return this.each(function(b,d){f(this).on("click",function(b){new jValidador(this,a,b)})})}jValidador=function(a,b,c){this._default={funcionError:this.mensajeError,totalError:!1,divError:!1,cssError:"div-error",vControl:!0,post:!1,prev:!1,validaciones:!1,form:!1,campo:!1,viaData:!1};a?(this.$ele=f(a),this.config=b,this.errores={},this.config="object"==typeof this.config?f.extend(this._default,this.config):this._default,this.config.campo?(this.$ele=f(a),this.initInput()):
(this.$ele.data("config",this.config),this.$form=this.config.form?f("#"+this.config.form):f(this.$ele[0].form),this.$ele.data("jd.validador",this),this.$form.data("jd.validador",this),this.init()||c.preventDefault())):console.log("ney")};jValidador.VERSION="1.1";jValidador.replaceAll=function(a,b,c){c||(c="");var d=a,e=a.indexOf(b);if(-1<e)for(;-1<e;)d=a.substring(0,e),d=d+c+a.substring(e+1),e=d.indexOf(b),this.errores=TRUE,a=d;return d};f.fn.validadorJida=k;jValidador.prototype={initInput:function(a){$ele=
this.$ele;bandera=!0;jv=this;$ele.data("validacion")&&!0===bandera&&!jv.validar($ele,jv.verificarValidaciones($ele.data("validacion")))&&(eval(jv.config.funcionError).call(this,$ele),jv.erroresCampo=!0,bandera=!1);return bandera},erroresCampo:!1,init:function(a){jv=this.$ele.data("jd.validador");jv.errores={};b=!0;if(jv.validarFuncionesExternas("prev")){a=this.$form;var b=!0;if("undefined"!=typeof a||"undefined"!=typeof a.elements)f.each(a[0].elements,function(a,d){var e=f(d),g=jv.obtValidacionesCampo(e);
if(g&&!0===b&&!jv.validar(e,jv.verificarValidaciones(g)))return jv.totalErrores||jv.config.funcionError.call(this,e,jv),b=!1}),b&&(b=jv.validarFuncionesExternas("post"))}return b},obtValidacionesCampo:function(a){return this.config.viaData?a.data("validacion"):"undefined"!=this.config.validaciones[a.attr("id")]?this.config.validaciones[a.attr("id")]:!1},validarFuncionesExternas:function(a){return 0!=this.config[a]&&"undefined"!=typeof this.config[a]?result="string"==typeof this.config[a]?eval(this.config[a]).call(this,
jv.$form):this.config[a].call(this):!0},validar:function(a,b){var c=!0;if(1==b.obligatorio||"object"==typeof b.obligatorio)c=jv.obligatorio(a,b.obligatorio);c?f.each(b,function(b,e){type=typeof parametros;if(0!=e&&1==c&&"obligatorio"!=b)if(jv[b])jv[b](a,b,e)||(jv.errores[a.attr("id")]=b,c=!1);else if(jValidador.validaciones[b])jv.ejecutarValidacion(a,b)||(jv.errores[a.attr("name")]=b,c=!1);else throw Error("No existe la validacion solicitada "+b);}):jv.errores[a.attr("id")]="obligatorio";return c},
externa:function(a,b,c){if(c.funcion)return c.funcion.call(this,a,b,c);if(c.expr)return this.ejecutarValidacion(a,b,c.expr);throw Error("No se ha formulado correctamente la validacione xterna"+b);},expr:function(a,b,c){return this.ejecutarValidacion(a,b,c.expr)},ejecutarValidacion:function(a,b,c){c||(c=jValidador.validaciones[b].expr);a=a.val();if("numerico"==b||"decimal"==b)a=jValidador.replaceAll(a,"."),"decimal"==b&&a.replace(",",".");return""!=a?c.test(a)?!0:!1:!0},mensajeError:function(a,b){if(a){$input=
a;var c=jv.errores[a.attr("id")],d=b.obtValidacionesCampo(a),e="",g=b.$form.find("."+b.config.cssError),e=void 0!=d[c]?d[c].mensaje?d[c].mensaje:jValidador.validaciones[c].mensaje:jValidador.validaciones[c].mensaje;0<g.size()?$input.parent().hasClass("control-multiple")?$input.focus().parent().before(g.html(e).show()):$input.focus().before(g.html(e).show()):($divError=f("<div></div>").addClass(jv.config.cssError).html(e),b.$form.on("click",function(a){f(a.target).attr("id")!=jv.$ele.attr("id")&&$divError.fadeOut()}),
$input.parent().hasClass("control-multiple")?$input.focus().parent().before($divError).show():$input.focus().before($divError).show());f("html,body").animate({scrollTop:$input.offset().top-200})}},verificarValidaciones:function(a){var b={numerico:!1,documentacion:!1,obligatorio:!1,caracteres:!1};return"undefined"!=typeof a?(a instanceof Array&&(newObject={},f.each(a,function(a,b){newObject[b]=!0}),a=newObject),f.extend(b,a)):b},obligatorio:function(a,b){"undefined"==typeof b.evaluacion&&(b.evaluacion=
"igual");var c=a.attr("type");a.attr("id");var d=!0;if(b.condicional){var e,d=f("#"+b.condicional);b.tipo&&"radio"==b.tipo||"radio"==d.attr("type")?(nombreCampo=d.attr("name"),e=f("input[name="+nombreCampo+"]:checked").val()):e=d.val();d=!1;switch(b.evaluacion){case "igual":e==b.condicion&&(d=!0);break;case "diff":e!=b.condicion&&(d=!0);break;case "mayor":e>b.condicion&&(d=!0);break;case "menor":e<b.condicion&&(d=!0)}}else d=!0;if(!0===d)switch(c){case "RADIO":case "radio":case "CHECKBOX":case "checkbox":nombreCampo=
a.attr("name");resp=0<f('input[name="'+nombreCampo+'"]:checked').length?!0:!1;break;default:resp=""==a.val()?!1:!0}else resp=!0;return resp},documentacion:function(a,b,c){b=jValidador.validaciones[b].expr;var d=a.val();c.campo_codigo&&(d=a.prev().val()+d);return""!=d?b.test(d)?!0:!1:!0},telefono:function(a,b,c){var d="",e="",g=jValidador.validaciones.telefono.expr,k=jValidador.validaciones.celular.expr;b=jValidador.validaciones.internacional.expr;var h=a.val();c.code&&(d=f("#"+a.attr("id")+"-codigo").val(),
jv.divMsjError="#box"+jValidador.replaceAll(a.attr("id"),"#",""));c.ext&&(e=f("#"+a.attr("id")+"-ext").val());h=d+h+e;return""!=h?(a=k.test(h)?1:0,g=g.test(h)?1:0,b=b.test(h)?1:0,c.tipo&&("telefono"==c.tipo&&1==g||"celular"==c.tipo&&1==a||"internacional"==c.tipo&&1==b||"multiple"==c.tipo&&(1==g||1==a))||!c.tipo&&1==g?!0:!1):!0},igualdad:function(a,b,c){campo=f("#"+c.campo);return a.val()==campo.val()?!0:!1},contrasenia:function(a,b,c){var d=jValidador.validaciones.minuscula.expr,e=jValidador.validaciones.mayuscula.expr;
c=jValidador.validaciones.numero.expr;b=jValidador.validaciones.caracteresEsp.expr;a=a.val();return""!=a?(d=d.test(a)?1:0,e=e.test(a)?1:0,c=c.test(a)?1:0,b=b.test(a)?1:0,1==d&&1==e&&1==c&&1==b&&8<=a.length?!0:!1):!1},obtErrores:function(){return jv.errores}};jValidador.validaciones={obligatorio:{mensaje:"El campo no puede estar vacio"},email:{expr:/^[_a-zA-Z0-9-]+(\.[_a-zA-Z0-9-]+)*@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*(\.[a-zA-Z]{2,3})$/,mensaje:"El campo debe ser un mail"},numerico:{expr:/^\d+$/,mensaje:"El campo debe ser numerico"},
moneda:{expr:/^\d+$/,mensaje:"El campo debe ser numerico"},decimal:{expr:/^([0-9])*[.|,]?[0-9]*$/,mensaje:"El campo debe ser numerico con decimales"},caracteres:{expr:/^[A-Z\u00f1\u00d1a-z\u00e1\u00e9\u00ed\u00f3\u00fa\u00c1\u00c9\u00cd\u00d3\u00da ]*$/,mensaje:"El campo solo puede contener caracteres"},celular:{expr:/^0(412|416|414|424|426)\d{7}$/,mensaje:"El formato del celular no es valido"},telefono:{expr:/^02[0-9]{9,13}$/,mensaje:"El formato del telefono no es valido"},caracteresEspeciales:{expr:/^([^(*=;\\)])*$/,
mensajes:"Caracteres invalidos en el campo"},tiny:{mensaje:"El campo es obligatorio"},alfanumerico:{expr:/^[\dA-Z\u00f1\u00d1a-z\u00e1\u00e9\u00ed\u00f3\u00fa\u00c1\u00c9\u00cd\u00d3\u00da.,\' ]*$/,mensaje:"El campo solo puede contener letras y numeros"},documentacion:{expr:/^([V|E|G|J|P|N]{1}\d{8,10})*$/,mensaje:"El campo debe tener el siguiente formato J-18935170"},programa:{expr:/^[\d\/\.A-Za-z_-]*$/,mensaje:"El campo solo puede contener letras, guion y underscore"},minuscula:{expr:/[a-z]/,mensaje:"La contrase\u00f1a debe tener al menos una minuscula"},
mayuscula:{expr:/[A-Z]/,mensaje:"La contrase\u00f1a debe tener al menos una mayuscula"},numero:{expr:/[0-9]/,mensaje:"La contrase\u00f1a debe tener al menos un n\u00famero"},caracteresEsp:{expr:/(\||\!|\"|\#|\$|\%|\&|\/|\(|\)|\=|\'|\?|\<|\>|\,|\;|\.|\:|\-|\_|\*|\~|\^|\{|\}|\+)/,mensaje:"La contrase\u00f1a debe tener al menos un caracter especial"},coordenada:{expr:/^\-?[0-9]{2}\.[0-9]{3,15}/,mensaje:"La coordenada debe tener el siguiente formato:"},internacional:{expr:/^\d{9,18}$/,mensaje:"El telefono internacional no es valido"}};
f.fn.jValidador=k;f(document).on("click",'[data-jida="validador"]',function(a){data=f(this).data("config");data.viaData=!0;new jValidador(this,data,a)})})(jQuery);